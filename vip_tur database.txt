CREATE DATABASE vip_tur;

CREATE TABLE CLIENTS
(
CLIENT_ID INT NOT NULL PRIMARY KEY,
NAME VARCHAR(40) NOT NULL,
EMAIL VARCHAR(30) NOT NULL
);

CREATE TABLE DESTINATIONS
(
DESTINATION_ID INT NOT NULL PRIMARY KEY,
NAME VARCHAR(60) NOT NULL,
PRICE NUMERIC(6,2) NOT NULL,
DURATION INT NOT NULL
);

CREATE TABLE RESERVATIONS
(
RESERVATION_ID INT NOT NULL PRIMARY KEY,
DESTINATION_ID INT NOT NULL,
CLIENT_ID INT,
);

ALTER TABLE RESERVATIONS ADD FOREIGN KEY (DESTINATION_ID) REFERENCES DESTINATIONS(DESTINATION_ID);

ALTER TABLE RESERVATIONS ADD FOREIGN KEY (CLIENT_ID) REFERENCES CLIENTS(CLIENT_ID);

ALTER TABLE DESTINATIONS ADD CHECK(PRICE>=0);

ALTER TABLE RESERVATIONS ADD DATE DATETIME NOT NULL;

INSERT INTO RESERVATIONS VALUES (1, 2, 1, '2015-02-14 08:20:58');

NSERT INTO DESTINATIONS VALUES (1251, 'TOKIO', 1000.00, 9);

--UPDATE DESTINATIONS SET DURATION = 10, PRICE = 1500 WHERE DESTINATION_ID = 1251;

DELETE FROM DESTINATIONS WHERE PRICE < 400;

SELECT NAME,RESERVATION_ID FROM CLIENTS C LEFT JOIN RESERVATIONS R ON C.CLIENT_ID=R.CLIENT_ID;

SELECT NAME, PRICE FROM RESERVATIONS R JOIN DESTINATIONS D ON R.DESTINATION_ID = D.DESTINATION_ID WHERE DURATION BETWEEN 5 AND 14;